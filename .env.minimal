# ============================================
# ClaraVerse - Minimal Local Configuration
# ============================================
# Version: 2.0 (Fully Local - No External APIs Required!)
#
# Quick Setup:
#   1. Copy this file: cp .env.minimal .env
#   2. Generate secrets: ./scripts/generate-secrets.sh
#      (Or manually replace CHANGE_ME values below)
#   3. Run: docker-compose up
#   4. Access: http://localhost:5173
#
# Default Admin Account:
#   Email: admin@localhost
#   Password: admin
#   (Change on first login!)
# ============================================

ENVIRONMENT=development

# ================================
# Frontend URLs
# ================================
VITE_API_BASE_URL=http://localhost:3001
VITE_WS_URL=ws://localhost:3001

# ================================
# CORS (Allow frontend access)
# ================================
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8080

# ================================
# SECURITY - CHANGE THESE!
# ================================
# Generate with: openssl rand -hex 32
ENCRYPTION_MASTER_KEY=CHANGE_ME_RUN_openssl_rand_hex_32_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Generate with: openssl rand -hex 64
JWT_SECRET=CHANGE_ME_RUN_openssl_rand_hex_64_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# JWT Token Expiry
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# ================================
# DATABASE (Works with Docker Compose)
# ================================
MONGODB_URI=mongodb://mongodb:27017/claraverse
REDIS_URL=redis://redis:6379

# MySQL Credentials
MYSQL_ROOT_PASSWORD=claraverse_root_2024
MYSQL_PASSWORD=claraverse_pass_2024

# ================================
# CODE EXECUTION (E2B Local Mode)
# ================================
E2B_MODE=local
E2B_LOCAL_USE_DOCKER=true
E2B_SANDBOX_POOL_SIZE=3
E2B_EXECUTION_TIMEOUT=30000
E2B_RATE_LIMIT_PER_MIN=20

# Optional: Upgrade to E2B Cloud (requires API key from https://e2b.dev)
# E2B_MODE=production
# E2B_API_KEY=your_e2b_api_key_here

# ================================
# SEARXNG (Internal Search Engine)
# ================================
SEARXNG_URLS=http://searxng:8080

# ================================
# USER TIERS (Default: Everyone gets Pro)
# ================================
DEFAULT_USER_TIER=pro

# ================================
# FRONTEND & BACKEND URLs
# ================================
FRONTEND_URL=http://localhost:5173
BACKEND_URL=http://localhost:3001

# ================================
# OPTIONAL FEATURES (Disabled by Default)
# ================================

# Integrations (Gmail, Google Sheets) - Disabled
INTEGRATIONS_ENABLED=false
# To enable, configure Google OAuth:
# GOOGLE_CLIENT_ID=your-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-client-secret
# See: docs/integrations/google-oauth-setup.md

# Email (SMTP) - Disabled
SMTP_ENABLED=false
# To enable, configure SMTP:
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# SMTP_FROM_EMAIL=noreply@claraverse.local

# CAPTCHA - Disabled (Rate limiting only)
CAPTCHA_ENABLED=false
# To enable, use hCaptcha:
# HCAPTCHA_SITE_KEY=your-site-key
# HCAPTCHA_SECRET_KEY=your-secret-key

# ================================
# ADMIN (Optional)
# ================================
# Comma-separated user IDs with superadmin access
SUPERADMIN_USER_IDS=

# ================================
# RATE LIMITING (requests per minute)
# ================================
RATE_LIMIT_GLOBAL_API=200
RATE_LIMIT_PUBLIC_READ=120
RATE_LIMIT_AUTHENTICATED=60
RATE_LIMIT_WEBSOCKET=20
RATE_LIMIT_IMAGE_PROXY=60

# ================================
# DEVELOPMENT
# ================================
DEV_API_KEY=claraverse-dev-key-2024
